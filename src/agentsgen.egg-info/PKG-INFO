Metadata-Version: 2.4
Name: agentsgen
Version: 0.1.0
Summary: Generate and safely update AGENTS.md and RUNBOOK.md for coding agents
Author: Anton
License: MIT
Requires-Python: >=3.11
Description-Content-Type: text/markdown
Requires-Dist: typer<1.0,>=0.12
Requires-Dist: rich<14,>=13

# AGENTS.md Generator (agentsgen)

Production-grade tiny CLI to generate and safely update repo guidance for coding agents.

## Definition Of Done (DoD)

- `agentsgen init` works in an empty folder and creates:
  - `.agentsgen.json`
  - `AGENTS.md`
  - `RUNBOOK.md`
- `agentsgen update`:
  - updates only content inside marker sections
  - does not touch user content outside markers
  - if a file exists but has no markers: does not modify it, writes `*.generated.md`
- `agentsgen check` returns non-zero exit code on problems
- 3 smoke tests exist (`python -m agentsgen._smoke`)
- This README contains: install, init, update, check, uninstall

## Install

Using `pipx` (recommended):

```sh
pipx install .
```

Editable install (dev):

```sh
pip install -e .
```

## Usage

### init

Interactive init:

```sh
agentsgen init
```

Fast defaults (minimal questions):

```sh
agentsgen init --defaults
```

Safe mode table (no prompts, no overwrite):

- file missing: create with markers
- file exists + markers exist: patch only the ranges between markers
- file exists + no markers: do not touch, write `AGENTS.generated.md` / `RUNBOOK.generated.md`

### update

Update marked sections using `.agentsgen.json`:

```sh
agentsgen update
```

### check

CI-friendly validation (non-zero exit code on problems):

```sh
agentsgen check
```

### Uninstall

```sh
pipx uninstall agentsgen
```

## Re-run Safety / Idempotency

- Re-running `init` does not duplicate sections.
- Running `update` twice should produce a zero diff.

## Dev Smoke Tests

```sh
python -m agentsgen._smoke
```

## Notes

- Stack detection is intentionally shallow (2-3 sentinel files).
- No external API calls.
- Marker format (no nesting, no duplicates):

```md
<!-- AGENTSGEN:START commands -->
... generated content ...
<!-- AGENTSGEN:END commands -->
```
